{
  "permissions": {
    "allow": [
      "Bash(__NEW_LINE__ echo \"üìã Raw runtime logs (last 200 lines)...\")",
      "Bash(__NEW_LINE__ doctl apps logs $APP_ID --type run --tail 200)",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Bug #8 fix (API-key-level project caching)...\")",
      "mcp__filesystem__write_file",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Bug #8 REAL FIX: Stable Session IDs\")",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Tool Execution Bug Fix (commit 01f2a03)...\")",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Handover Fix (commit 8f67f41)...\")",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying MCP Tool Documentation Fix (commit 016fcdc)\")",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Breadcrumb Trail Integration (commit 0241122)...\")",
      "Bash(/tmp/watch_all_tests.sh)",
      "Bash(git cherry-pick:*)",
      "Bash(git show:*)",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Documentation Fixes + Breadcrumb Integration (commit 0241122)...\")",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Bug #2 Fix (PROJECT ISOLATION FAILURE)\")",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying Bug #2 Extended Fix (search_contexts session_id filter removal)...\")",
      "Bash(then echo \"=== Last 30 lines of MCP monitor ===\")",
      "Bash(else echo \"Monitor log not found\")",
      "Bash(APP_URL=\"https://dementia-mcp-7f4vf.ondigitalocean.app/health\")",
      "Bash(API_KEY=\"wWKYw3FTk_IhCCVwwmKopF7RTvGn8yDEFobOyEXZOHU\" curl -s -H \"Authorization: Bearer $API_KEY\" https://dementia-mcp-7f4vf.ondigitalocean.app/tools)",
      "Bash(git switch:*)",
      "Bash(git fetch:*)",
      "Bash(git branch:*)",
      "Bash(git log:*)",
      "Bash(git merge-base:*)",
      "Bash(__NEW_LINE__ echo \"üöÄ Triggering deployment with refactor branch fix (commit 445160b)...\")",
      "Bash(__NEW_LINE__ echo \"üöÄ Triggering FINAL refactor deployment (commit 00282af)...\")",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" doctl apps list-deployments:*)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Checking for OAuth validation and session events around 19:36...\" doctl apps logs $APP_ID --type run --tail 1000)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Checking for session state changes around DELETE...\" doctl apps logs $APP_ID --type run --tail 1000)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Looking for OAuth token validation patterns...\" doctl apps logs $APP_ID --type run --tail 1000)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Looking for ALL server events between 19:36:35 (DELETE) and 19:36:48 (auth loss)...\" echo \"\" doctl apps logs $APP_ID --type run --tail 1500)",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying OAuth Token Loss Workaround (DELETE 202)...\")",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Checking for recent DELETE requests and reconnection pattern...\" echo \"\" doctl apps logs $APP_ID --type run --tail 100)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Analyzing reconnection pattern in recent logs...\" echo \"\" echo \"Looking for:\" echo \"  1. DELETE requests (status 202 or 204)\" echo \"  2. has_auth status before/after DELETE\" echo \"  3. 401 errors after DELETE\" echo \"  4. Tool list requests\" echo \"\" doctl apps logs $APP_ID --type run --tail 200)",
      "Bash(__NEW_LINE__ echo \"üöÄ Deploying inputSchema fix (commit 6580ec2)...\")",
      "Bash(__NEW_LINE__ echo \"üìã Checking recent production logs (last 100 lines)...\")",
      "WebFetch(domain:gofastmcp.com)",
      "Bash(python3:*)",
      "Bash(curl:*)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Checking for schema patching logs...\" doctl apps logs $APP_ID --type run --tail 200)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git checkout:*)",
      "Bash(git pull:*)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\")",
      "Bash(doctl apps create-deployment:*)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"‚è≥ Watching deployment progress...\" sleep 5 doctl apps list-deployments $APP_ID)",
      "Bash(doctl apps logs:*)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"‚è≥ Waiting 60 seconds for deployment...\" sleep 60 echo \"\" echo \"üìä Checking deployment status...\" doctl apps list-deployments $APP_ID --format ID,Phase,Progress)",
      "Bash(doctl apps list-deployments:*)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Checking what our /tools endpoint currently returns...\" curl -s -H \"Authorization: Bearer wWKYw3FTk_IhCCVwwmKopF7RTvGn8yDEFobOyEXZOHU\" https://dementia-mcp-7f4vf.ondigitalocean.app/tools)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo:*)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Checking app initialization logs...\" doctl apps logs $APP_ID --type run --tail 200)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üîç Checking for any /tools requests in recent logs...\" doctl apps logs $APP_ID --type run --tail 300)",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üèóÔ∏è Checking build logs for latest deployment...\" doctl apps logs $APP_ID --type build --tail 50)",
      "WebSearch",
      "Bash(__NEW_LINE__ APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\")",
      "Bash(APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"‚è≥ Waiting 60 seconds for deployment to start...\" sleep 60 echo \"\" echo \"üìä Checking deployment progress...\" doctl apps list-deployments $APP_ID --format ID,Phase,Progress)",
      "Bash(cat:*)",
      "Bash(__NEW_LINE__ cp server_hosted_MINIMAL.py server_hosted.py)",
      "Bash(__NEW_LINE__ echo \"\")",
      "Bash(__NEW_LINE__ doctl apps create-deployment \"20c874aa-0ed2-44e3-a433-699f17d88a44\" --force-rebuild)",
      "Bash(__NEW_LINE__ APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üìä Checking current deployment status...\" doctl apps list-deployments $APP_ID --format ID,Phase,Progress)",
      "Bash(__NEW_LINE__ cp server_hosted.py server_hosted_FULL.py.backup)",
      "Bash(__NEW_LINE__ git add server_hosted.py server_hosted_MINIMAL.py server_hosted_FULL.py.backup)",
      "Bash(__NEW_LINE__ APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üìä Checking deployment status...\" doctl apps list-deployments $APP_ID --format ID,Phase,Progress)",
      "Bash(__NEW_LINE__ echo \"‚è≥ Waiting 60 seconds for deployment to build...\" sleep 60 echo \"\" echo \"üìä Checking deployment progress...\" doctl apps list-deployments 20c874aa-0ed2-44e3-a433-699f17d88a44 --format ID,Phase,Progress)",
      "Bash(__NEW_LINE__ echo \"‚è≥ Waiting 30 more seconds for new deployment...\" sleep 30 echo \"\" echo \"üìã Checking for ULTRA-MINIMAL server logs...\" doctl apps logs 20c874aa-0ed2-44e3-a433-699f17d88a44 --type run --tail 50)",
      "Bash(doctl apps get-deployment:*)",
      "Bash(__NEW_LINE__ APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" doctl apps spec get $APP_ID --format yaml)",
      "Bash(__NEW_LINE__ git add Procfile)",
      "Bash(__NEW_LINE__ echo \"‚è≥ Waiting 90 seconds for deployment...\")",
      "Bash(__NEW_LINE__ APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üìã Checking recent logs...\" doctl apps logs $APP_ID --type run --tail 30)",
      "Bash(__NEW_LINE__ echo \"‚è≥ Waiting 30 more seconds...\")",
      "Bash(__NEW_LINE__ APP_ID=\"20c874aa-0ed2-44e3-a433-699f17d88a44\" echo \"üìã Checking runtime logs for deployment 80d66acc...\" doctl apps logs $APP_ID --type run --deployment 80d66acc-e9e2-4b51-83c8-88290907b9ea --tail 100)",
      "Bash(__NEW_LINE__ git add server_hosted.py)",
      "Bash(__NEW_LINE__ echo \"‚è≥ Waiting 60 seconds for build to complete...\")",
      "Bash(__NEW_LINE__ echo \"‚è≥ Waiting 45 more seconds...\")",
      "Bash(__NEW_LINE__ git add server_hosted.py PHASE_0_BATTLE_PLAN.md)",
      "Bash(__NEW_LINE__ git add oauth_mock.py)",
      "Bash(__NEW_LINE__ git add server_hosted.py ROOT_CAUSE_FOUND.md)",
      "Bash(__NEW_LINE__ git status)"
    ],
    "deny": [],
    "ask": [],
    "additionalDirectories": [
      "/private/tmp"
    ]
  }
}
